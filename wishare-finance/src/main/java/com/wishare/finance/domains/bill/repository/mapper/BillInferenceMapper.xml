<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wishare.finance.domains.bill.repository.mapper.BillInferenceMapper">

  <select id="getByBillIdAndEventType" resultType="com.wishare.finance.domains.bill.entity.BillInferenceE">
        select * from bill_inference where bill_id = #{billId} and bill_type = #{type} and event_type = #{eventType} limit 1
  </select>

  <select id="listByBillIdAndEventType" parameterType="java.util.List"
            resultType="com.wishare.finance.domains.bill.entity.BillInferenceE">
        select * from bill_inference where bill_id in
         <foreach collection="billIds" close=")" open="(" item="billId" separator=",">
             #{billId}
         </foreach>
         and bill_type = #{type} and event_type = #{eventType}
        GROUP BY bill_id
    </select>

  <delete id="batchDeleteInference" parameterType="java.util.List">
        delete from bill_inference where id in
    <foreach collection="billIds" close=")" open="(" item="billId" separator=",">
      #{billId}
    </foreach>
  </delete>
</mapper>
