<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wishare.finance.domains.voucher.repository.mapper.VoucherMapper">


  <!--分页查询账簿列表-->
  <select id="queryPage" resultType="com.wishare.finance.domains.voucher.entity.VoucherE">
    SELECT * FROM voucher ${ew.customSqlSegment}
  </select>

  <select id="staticVoucherAmount" resultType="java.lang.Long">
    SELECT sum(amount) FROM voucher ${ew.customSqlSegment}
  </select>


  <update id="updateVoucherNoByIds" parameterType="java.util.List">
    update voucher set inference_state = #{state}
    <if test="state != 4">
      , reason = #{reason}
    </if>
    where id in <foreach collection="ids" separator="," item="id" open="(" close=")" >#{id}</foreach>
  </update>
</mapper>
